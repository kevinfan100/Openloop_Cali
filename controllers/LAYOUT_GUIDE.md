# Flux Controller ä½ˆå±€æŒ‡å—

åŸºæ–¼ `Flux_Controller_Type3.slx` çš„æ‰‹å‹•èª¿æ•´ä½ˆå±€

---

## ğŸ“ æ•´é«”ä½ˆå±€è¦–åœ–

```
Layer 1    Layer 2    Layer 3         Layer 4    Layer 5        Layer 6              Layer 7        Layer 8
X=105      X=290      X=450-600       X=565      X=720-810      X=685-945            X=1000-1120    X=1185
  â†“          â†“           â†“              â†“           â†“               â†“                    â†“            â†“
è¼¸å…¥       èª¤å·®è¨ˆç®—   å»¶é²&å‰µæ–°é …    ä¼°æ¸¬å™¨å¢ç›Š  ç‹€æ…‹æ›´æ–°      å‰é¥‹&åé¥‹è¨ˆç®—          æ§åˆ¶å¾‹         è¼¸å‡º
```

---

## ğŸ¯ è©³ç´°åº§æ¨™ä½ˆå±€

### **å‚ç›´åˆ†å€ï¼ˆY åº§æ¨™ï¼‰**

```
Y = 85-225     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   å‰é¥‹å€åŸŸ                              â”‚
               â”‚   â€¢ Vd_Delay, Vd_Delay2                â”‚
               â”‚   â€¢ Gain_a1, Gain_a2                   â”‚
               â”‚   â€¢ FF_Sum                             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Y = 137-168    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   èª¤å·®è¨ˆç®—                              â”‚
               â”‚   â€¢ Error_Calc                         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Y = 322-555    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   ä¼°æ¸¬å™¨æ ¸å¿ƒå€åŸŸ                        â”‚
               â”‚   â€¢ Innovation                         â”‚
               â”‚   â€¢ Gain_l1, Gain_lambda_c, Gain_l2, Gain_l3â”‚
               â”‚   â€¢ S1_Sum, S1_Delay  (Y=350)          â”‚
               â”‚   â€¢ S2_Sum, S2_Delay  (Y=450)          â”‚
               â”‚   â€¢ WT_Sum, WT_Delay  (Y=535)          â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Y = 405-435    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   æ§åˆ¶å¾‹ä¸­å¿ƒ                            â”‚
               â”‚   â€¢ Control_Sum, B_inv_Gain, u         â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Y = 570-640    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   åé¥‹å€åŸŸ                              â”‚
               â”‚   â€¢ FB_Gain1, FB_Gain2                 â”‚
               â”‚   â€¢ FB_Sum                             â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ä¿¡è™Ÿæµåœ–ï¼ˆå¯¦éš›åº§æ¨™ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                 â”‚
â”‚  [Vd]          [Vd_Delay]â”€â”€â”€â”€[Vd_Delay2]         [Gain_a1]                     â”‚
â”‚  X=105         X=450          X=550               X=820                         â”‚
â”‚  Y=100         Y=100          Y=100     â”Œâ”€â”€â”€â”€â”€â”€â†’  Y=210  â”€â”€â”                   â”‚
â”‚                                          â”‚                   â†“                   â”‚
â”‚                                          â”‚              [FF_Sum]                 â”‚
â”‚  [Vm]                                    â”‚               X=915                  â”‚
â”‚  X=105                                   â”‚               Y=210                  â”‚
â”‚  Y=160                                   â”‚                  â”‚                   â”‚
â”‚    â†“                                     â”‚                  â†“                   â”‚
â”‚    â”‚                                     â”‚         [Control_Sum]â”€â”€[B_inv]â”€â†’[u]  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â†’ [Error_Calc] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          X=1000      X=1090   X=1185â”‚
â”‚    â”‚        X=290                         â”‚          Y=420       Y=420    Y=420 â”‚
â”‚    â”‚        Y=152                         â”‚             â†‘                        â”‚
â”‚    â”‚          â†“                           â”‚             â”‚                        â”‚
â”‚    â”‚          â”‚                           â”‚          [FB_Sum]                    â”‚
â”‚    â”‚          â””â”€â”€â†’ [Innovation] â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤           X=915                     â”‚
â”‚    â”‚               X=470             â”‚    â”‚           Y=592                     â”‚
â”‚    â”‚               Y=337             â”‚    â”‚              â†‘                       â”‚
â”‚    â”‚                                 â†“    â”‚        [FB_Gain1] [FB_Gain2]        â”‚
â”‚    â”‚                            [Gain_l1] â”‚         X=685      X=855            â”‚
â”‚    â”‚                             X=565    â”‚         Y=585      Y=625            â”‚
â”‚    â”‚                             Y=340    â”‚            â†‘          â†‘              â”‚
â”‚    â”‚                                â†“     â”‚            â”‚          â”‚              â”‚
â”‚    â”‚                           [S1_Sum]â”€â”€â”€â”´â”€â”€â†’ [S1_Delay]         â”‚              â”‚
â”‚    â”‚                            X=720         X=780    â”‚          â”‚              â”‚
â”‚    â”‚                            Y=347         Y=350    â”‚          â”‚              â”‚
â”‚    â”‚                               â†“                   â”‚          â”‚              â”‚
â”‚    â”‚                         [Gain_lambda_c]           â”‚          â”‚              â”‚
â”‚    â”‚                             X=565      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚              â”‚
â”‚    â”‚                             Y=390      â”‚                     â”‚              â”‚
â”‚    â”‚                                        â”‚    [S2_Delay] â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚    â”‚                           [Gain_l2] â”€â”€â”´â”€â”€â†’  X=780                          â”‚
â”‚    â”‚                             X=565            Y=450                          â”‚
â”‚    â”‚                             Y=455               â”‚                           â”‚
â”‚    â”‚                                â†“                â”‚                           â”‚
â”‚    â”‚                           [S2_Sum] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚    â”‚                            X=720                                            â”‚
â”‚    â”‚                            Y=447                                            â”‚
â”‚    â”‚                                                                             â”‚
â”‚    â”‚                           [Gain_l3]                                         â”‚
â”‚    â”‚                             X=565                                           â”‚
â”‚    â”‚                             Y=540                                           â”‚
â”‚    â”‚                                â†“                                            â”‚
â”‚    â”‚                           [WT_Sum] â”€â”€â”€â”€â”€â”€â”€â”€â†’ [WT_Delay]                     â”‚
â”‚    â”‚                            X=720              X=780                         â”‚
â”‚    â”‚                            Y=532              Y=535                         â”‚
â”‚    â”‚                                                                             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ [e]     â”‚
â”‚                                                                          X=1185  â”‚
â”‚                                                                          Y=155   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š é—œéµåº§æ¨™è¡¨

### **è¼¸å…¥/è¼¸å‡º**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| Vd | 105 | 100 | [105, 90, 135, 110] |
| Vm | 105 | 160 | [105, 150, 135, 170] |
| u | 1185 | 420 | [1185, 410, 1215, 430] |
| e | 1185 | 155 | [1185, 145, 1215, 165] |

### **èª¤å·®èˆ‡å»¶é²**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| Error_Calc | 305 | 152 | [290, 137, 320, 168] |
| Vd_Delay | 465 | 100 | [450, 85, 480, 115] |
| Vd_Delay2 | 565 | 100 | [550, 85, 580, 115] |

### **ä¼°æ¸¬å™¨æ ¸å¿ƒ**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| Innovation | 485 | 337 | [470, 322, 500, 353] |
| Gain_l1 | 580 | 340 | [565, 325, 595, 355] |
| Gain_lambda_c | 580 | 390 | [565, 375, 595, 405] |
| Gain_l2 | 580 | 455 | [565, 440, 595, 470] |
| Gain_l3 | 580 | 540 | [565, 525, 595, 555] |

### **ä¼°æ¸¬å™¨ç‹€æ…‹ï¼ˆå‚ç›´é–“éš” 100ï¼‰**
| Block | X | Y (center) | Position | é–“éš” |
|-------|---|------------|----------|------|
| S1_Sum | 735 | 347 | [720, 332, 750, 363] | - |
| S1_Delay | 795 | 350 | [780, 335, 810, 365] | - |
| S2_Sum | 735 | 447 | [720, 432, 750, 463] | +100 |
| S2_Delay | 795 | 450 | [780, 435, 810, 465] | +100 |
| WT_Sum | 735 | 532 | [720, 517, 750, 548] | +85 |
| WT_Delay | 795 | 535 | [780, 520, 810, 550] | +85 |

### **å‰é¥‹è¨ˆç®—**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| Gain_a1 | 835 | 210 | [820, 195, 850, 225] |
| Gain_a2 | 780 | 280 | [765, 265, 795, 295] |
| FF_Sum | 930 | 210 | [915, 195, 945, 225] |

### **åé¥‹è¨ˆç®—**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| FB_Gain1 | 700 | 585 | [685, 570, 715, 600] |
| FB_Gain2 | 870 | 625 | [855, 610, 885, 640] |
| FB_Sum | 930 | 592 | [915, 577, 945, 608] |

### **æ§åˆ¶å¾‹**
| Block | X | Y (center) | Position |
|-------|---|------------|----------|
| Control_Sum | 1015 | 420 | [1000, 405, 1030, 435] |
| B_inv_Gain | 1105 | 420 | [1090, 405, 1120, 435] |

---

## ğŸ¨ ä½ˆå±€è¨­è¨ˆåŸå‰‡ï¼ˆä½ çš„é‚è¼¯ï¼‰

### 1. **æ°´å¹³åˆ†å±¤**
- æ¯ä¸€å±¤ä»£è¡¨ä¿¡è™Ÿæµçš„ä¸€å€‹è™•ç†éšæ®µ
- å¾å·¦åˆ°å³ï¼šè¼¸å…¥ â†’ è™•ç† â†’ è¼¸å‡º
- ç¸½å¯¬åº¦ç´„ 1100 åƒç´ 

### 2. **å‚ç›´åˆ†å€**
- **ä¸Šæ–¹ (Y < 300)**ï¼šå‰é¥‹è·¯å¾‘
- **ä¸­é–“ (Y = 300-550)**ï¼šä¼°æ¸¬å™¨æ ¸å¿ƒ
- **ä¸‹æ–¹ (Y > 550)**ï¼šåé¥‹è·¯å¾‘
- **ä¸­å¿ƒ (Y = 400-450)**ï¼šæ§åˆ¶å¾‹èˆ‡ä¸»è¼¸å‡º

### 3. **åŠŸèƒ½åˆ†çµ„**
- **ä¼°æ¸¬å™¨**: æ‰€æœ‰ä¼°æ¸¬å™¨ç›¸é—œæ¨¡çµ„åœ¨ X=470-810 å€åŸŸ
- **å‰é¥‹**: æ‰€æœ‰å‰é¥‹ç›¸é—œæ¨¡çµ„åœ¨ Y=85-295 å€åŸŸ
- **åé¥‹**: æ‰€æœ‰åé¥‹ç›¸é—œæ¨¡çµ„åœ¨ Y=570-640 å€åŸŸ

### 4. **å°é½Šè¦å‰‡**
- **Sum â†’ Delay**: æ°´å¹³é–“éš” 60 åƒç´ 
- **ä¼°æ¸¬å™¨ç‹€æ…‹**: å‚ç›´é–“éš” 100 åƒç´ 
- **å¢ç›Šæ¨¡çµ„**: å‚ç›´é–“éš” 50-85 åƒç´ 

---

## ğŸ”§ ä½¿ç”¨é€™å€‹ä½ˆå±€

### **æ–¹æ³• 1: ä½¿ç”¨æ¨¡æ¿å‡½æ•¸**
```matlab
layout = layout_template();

% å»ºç«‹ block æ™‚ä½¿ç”¨åº§æ¨™
add_block('simulink/Sources/In1', [model '/Vd']);
set_param([model '/Vd'], 'Position', [layout.x.input, layout.y.input_vd-10, ...
                                       layout.x.input+30, layout.y.input_vd+10]);
```

### **æ–¹æ³• 2: ç›´æ¥åƒè€ƒåº§æ¨™è¡¨**
å¾ä¸Šé¢çš„è¡¨æ ¼ç›´æ¥è¤‡è£½ Position å€¼

---

## ğŸ“ æœªä¾†æ“´å±•

### **Type 2 æ§åˆ¶å™¨ï¼ˆéœ€è¦æ·»åŠ  Î´ÅµT ç‹€æ…‹ï¼‰**
- åœ¨ WT_Delay ä¸‹æ–¹æ·»åŠ 
- Y åº§æ¨™: 535 + 100 = 635
- ä¿æŒç›¸åŒçš„ X åº§æ¨™é‚è¼¯

### **Type 1 æ§åˆ¶å™¨ï¼ˆéœ€è¦ w1, w2 å…©å€‹ç‹€æ…‹ï¼‰**
- æ›¿æ› WT_Sum/WT_Delay
- ä½¿ç”¨ç›¸åŒçš„ Y å€åŸŸï¼ˆ520-550ï¼‰
- æ·»åŠ  beta åƒæ•¸çš„å¢ç›Šæ¨¡çµ„

---

## âœ… ä½ˆå±€å„ªé»

1. âœ… **ä¿¡è™Ÿæµæ¸…æ™°**ï¼šä¸€çœ¼çœ‹å‡ºæ•¸æ“šå¦‚ä½•æµå‹•
2. âœ… **æ˜“æ–¼èª¿è©¦**ï¼šåŠŸèƒ½åˆ†çµ„æ˜ç¢º
3. âœ… **å¯æ“´å±•**ï¼šé ç•™ç©ºé–“çµ¦ Type 1, 2
4. âœ… **å°ˆæ¥­å¤–è§€**ï¼šå°é½Šæ•´é½Šï¼Œé‚è¼¯æ¸…æ™°

---

**è¨˜éŒ„è€…**: Claude Code
**ä½ˆå±€è¨­è¨ˆ**: Kevin
**æ—¥æœŸ**: 2025-10-11
